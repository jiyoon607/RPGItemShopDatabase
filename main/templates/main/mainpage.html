{% load static %}
<!--<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게임 화면</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/project.css'%}">
</head>
<body>
    <div class="container">
        <div class="left">
            <div class="player">
                <h1>플레이어</h1>
            </div>
            <div class="overview">
                <h1>그림</h1>
                <img id="img-overview" src="{% static 'images/overview.png'%}" alt="게임 플로우">
            </div>
        </div>
        <div class="shop">
            <h1>상점</h1>
        </div>
    </div>
</body>
</html>-->

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게임 화면</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/project.css'%}">
</head>
<body>
<!-- 메시지 표시 부분 -->
<script type="text/javascript">
    {% if messages %}
        {% for message in messages %}
            alert("{{ message|escapejs }}");
        {% endfor %}
    {% endif %}
</script>

<div class="container">
    <div class="box box-1">
        <div class="box-1-box">
        <h4>플레이어</h4>
        {% if player %}
        <div>
            <p>닉네임: {{ player.nickname }}</p>
            <form action="{% url 'main:logout' %}" method="POST">
                {% csrf_token %}
                <div class="btn">
                    <input type="submit" value="로그아웃">
                </div>
            </form>
            <form action="{% url 'main:player-custom' %}" method="POST">
                {% csrf_token %}
                
                <!-- 체력 -->
                <p>
                체력: {{ player.health }} 
                <button type="submit" name="action" value="health_inc">+</button>
                <button type="submit" name="action" value="health_dec">-</button>
                </p>
                
                <!-- 레벨 -->
                <p>
                레벨: {{ player.level }} 
                <button type="submit" name="action" value="level_inc">+</button>
                <button type="submit" name="action" value="level_dec">-</button>
                </p>
                
                <!-- 보유 골드 -->
                <p>
                보유 골드: {{ player.playercurrency.amount }} 
                <button type="submit" name="action" value="gold_inc">+</button>
                <button type="submit" name="action" value="gold_dec">-</button>
                </p>
            </form>
        </div>
        {% else %}
        <form action="{% url 'main:login' %}" method="POST">
            {% csrf_token %}
            <div id="line"></div>
            <h3>기존 플레이어 로그인</h3>
            <div class="login">
                닉네임:
                <input id="ID" type="text" name="nickname" placeholder="닉네임을 입력하세요">
                <br>비밀번호:
                <input id="ID" type="password" name="password" placeholder="비밀번호를 입력하세요">
            </div>
            <div class="btn">
                <input type="submit" value="로그인">
            </div>
        </form>

        <form action="{% url 'main:signin' %}" method="POST">
            {% csrf_token %}
            <div id="line"></div>
            <h3>새 플레이어 생성</h3>
            <div class="login">
                닉네임:
                <input id="ID" type="text" name="nickname" placeholder="닉네임을 입력하세요">
                <br>비밀번호:
                <input id="ID" type="password" name="password" placeholder="비밀번호를 입력하세요">
            </div>
            <div class="btn">
                <input type="submit" value="새 플레이어 생성">
            </div>
        </form>
        {% endif %}
        </div>
        <div class="box-1-box">
            <h4>인벤토리</h4>
            <table border="1">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Effect</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in inventory_items %}
                    <tr>
                        <td>{{ item.id }}</td>
                        <td>{{ item.name }}</td>
                        <td>{{ item.type }}</td>
                        <td>{{ item.effect }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="box box-2">
        <h4>상점</h4>
        <h4>상점 위치: {{ shop.name }}  | 상점 위치: {{ shop.location }}</h4>
        <form method="POST" action="{% url 'main:buy-item' %}">
        {% csrf_token %}
        <table border="1">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Effect</th>
                    <th>StockQuantity</th>
                    <th>Price</th>
                </tr>
            </thead>
            <tbody>
                {% for shop_item in shop_item_managements %}
                <tr>
                    <td>{{ shop_item.item.id }}</td>
                    <td>{{ shop_item.item.name }}</td>
                    <td>{{ shop_item.item.type }}</td>
                    <td>{{ shop_item.item.effect }}</td>
                    <td>{{ shop_item.stockquantity }}</td>
                    <td>{{ shop_item.price }}</td>
                    <td>
                        <button type="submit" name="item_id" value="{{ shop_item.item.id }}">구매</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        </form>
    </div>
    <div class="box box-3">
        <h4>상점 거래 기록</h4>
    </div>
    <div class="box box-4">
        <h4>관리자</h4>
    </div>
</div>

<!--<img class="overview" src="{% static 'images/overview.png'%}" alt="게임 플로우">-->
</body>